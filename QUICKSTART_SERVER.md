# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ Media Cleaner

## ‚ö° 5 –º–∏–Ω—É—Ç –¥–æ –∑–∞–ø—É—Å–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd media_cleaner
pip install -r requirements.txt
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
python server_config.py
```

–î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏:
```
‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫:
  Input:  c:\Users\User\Desktop\!\media_cleaner\videos_input
  Output: c:\Users\User\Desktop\!\media_cleaner\videos_output
  Temp:   c:\Users\User\Desktop\!\media_cleaner\videos_temp
  Logs:   c:\Users\User\Desktop\!\media_cleaner\server_logs

üîß REST API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://0.0.0.0:8000
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python run_server.py
```

–í—ã–≤–æ–¥:
```
üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ...
‚úì –ó–∞–ø—É—â–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ #0
‚úì –ó–∞–ø—É—â–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ #1
üåê API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://0.0.0.0:8000
   –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://0.0.0.0:8000/docs
```

## üìö –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:8000/docs**
2. –ù–∞–∂–º–∏—Ç–µ "Try it out" –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ `/upload`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–µ–æ –∏ –Ω–∞–∂–º–∏—Ç–µ "Execute"
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `task_id` –∏–∑ –æ—Ç–≤–µ—Ç–∞
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ ID –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞

### –í–∞—Ä–∏–∞–Ω—Ç 2: Python –∫–ª–∏–µ–Ω—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ –∏ –∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
python client.py upload video.mp4 --wait --download ./results

# –ò–ª–∏ –ø–æ—à–∞–≥–æ–≤–æ:
python client.py upload video.mp4                    # –ó–∞–≥—Ä—É–∑–∫–∞
python client.py status <task_id> --wait            # –û–∂–∏–¥–∞–Ω–∏–µ
python client.py status <task_id> --download ./res  # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: curl

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ
curl -X POST "http://localhost:8000/upload" \
  -F "file=@video.mp4" \
  -F "epsilon=0.15" \
  -F "audio_level=—Å—Ä–µ–¥–Ω–∏–π"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
curl http://localhost:8000/task/<task_id>

# –°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
curl http://localhost:8000/download/<task_id> -o result.mp4
```

## üéØ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–∏–¥–µ–æ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–∏–∞–ø–∞–∑–æ–Ω | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|--------------|---------|
| `epsilon` | 0.04-0.20 | 0.120 | –°–∏–ª–∞ –≤–∏–¥–µ–æ-—à—É–º–∞ (–≤—ã—à–µ = –±–æ–ª—å—à–µ –≤–∏–¥–∏–º—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤) |
| `video_strength` | 1.0-2.0 | 1.0 | –ú–Ω–æ–∂–∏—Ç–µ–ª—å (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å) |
| `audio_level` | None/"—Å–ª–∞–±—ã–π"/"—Å—Ä–µ–¥–Ω–∏–π"/"—Å–∏–ª—å–Ω—ã–π" | "—Å–ª–∞–±—ã–π" | –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –∑–≤—É–∫–∞ |
| `every_n_frames` | 1-30 | 10 | –ü—Ä–∏–º–µ–Ω—è—Ç—å –∫ –∫–∞–∂–¥–æ–º—É N-–º—É –∫–∞–¥—Ä—É |

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```bash
python client.py stats
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
tail -f server_logs/server.log

# –õ–æ–≥ –æ–±—Ä–∞–±–æ—Ç–∫–∏
tail -f server_logs/queue.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```bash
python client.py health
```

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç:

```
media_cleaner/
‚îú‚îÄ‚îÄ videos_input/          # –í—Ö–æ–¥—è—â–∏–µ –≤–∏–¥–µ–æ
‚îú‚îÄ‚îÄ videos_output/         # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ
‚îú‚îÄ‚îÄ videos_temp/           # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–æ—á–∏—â–∞—é—Ç—Å—è)
‚îú‚îÄ‚îÄ server_logs/           # –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ queue_db/              # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (tasks.json)
‚îî‚îÄ‚îÄ server_logs/
    ‚îú‚îÄ‚îÄ server.log        # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
    ‚îî‚îÄ‚îÄ queue.log         # –õ–æ–≥ –æ–±—Ä–∞–±–æ—Ç–∫–∏
```

## üöÄ –î–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞–≥—Ä—É–∂–∞—é—Ç –≤–∏–¥–µ–æ

1. **–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π `user_id`:**
```bash
python client.py upload video.mp4 --user user_001 --wait --download ./results
```

2. **–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```bash
python client.py list --user user_001
```

3. **–£–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤:**
   - –°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫ –∫–∞–∂–¥–æ–º—É —Ñ–∞–π–ª—É
   - –§–æ—Ä–º–∞—Ç: `{task_id}_{original_name}.mp4`
   - –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ

## ‚öôÔ∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `server_config.py`:

```python
SERVER_CONFIG = {
    "host": "0.0.0.0",              # –°–ª—É—à–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
    "port": 8000,                   # –ü–æ—Ä—Ç API
    
    "max_video_size_gb": 2,         # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ
    "max_concurrent_tasks": 3,      # –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    
    "default_video_epsilon": 0.120,
    "default_audio_level": "—Å–ª–∞–±—ã–π",
}
```

–ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä.

## üêõ –ü—Ä–æ–±–ª–µ–º—ã

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
python server_config.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç
netstat -tuln | grep 8000
```

### –í–∏–¥–µ–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
python client.py status <task_id>

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—à–∏–±–∫—É
tail -f server_logs/queue.log
```

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](./SERVER_DEPLOYMENT.md)
- [API Reference](./API_DOCS.md)
- [–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](./EXAMPLES.md)

## üéì –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (Python)

```python
from client import MediaCleanerClient

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
client = MediaCleanerClient("http://localhost:8000")

# –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ
result = client.upload_video(
    "my_video.mp4",
    epsilon=0.15,
    audio_level="—Å—Ä–µ–¥–Ω–∏–π",
    user_id="my_user_id"
)
task_id = result['task_id']

# –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
task = client.wait_for_completion(task_id)

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
if task['status'] == 'completed':
    client.download_result(task_id, output_path="./results")
    print("‚úÖ –ì–æ—Ç–æ–≤–æ!")
```

## üì± –í–∞–∂–Ω–æ –¥–ª—è multi-user –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID**: –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–ò–∑–æ–ª—è—Ü–∏—è**: –í–∏–¥–µ–æ —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
3. **–û—á–µ—Ä–µ–¥—å**: –°–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `max_concurrent_tasks`)
4. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∫–∞—á–∞—Ç—å —Å–≤–æ–∏ —Ñ–∞–π–ª—ã (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é)

---

**–ì–æ—Ç–æ–≤–æ!** –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≥–æ—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤–∏–¥–µ–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. üéâ
