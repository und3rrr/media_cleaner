â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ‘Ğ«Ğ¡Ğ¢Ğ Ğ«Ğ™ Ğ¡ĞŸĞ ĞĞ’ĞĞ§ĞĞ˜Ğš ĞšĞĞœĞĞĞ” Ğ£ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯ Ğ¡Ğ•Ğ Ğ’Ğ•Ğ ĞĞœ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ ĞŸĞĞ Ğ¢ĞĞ’ Ğ˜ Ğ¡Ğ•Ğ Ğ’Ğ˜Ğ¡ĞĞ’
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ĞŸĞ¾Ñ€Ñ‚    | Ğ¡ĞµÑ€Ğ²Ğ¸Ñ              | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ                      | Ğ”Ğ¾ÑÑ‚ÑƒĞ¿
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5000    | Flask (Gunicorn)    | Ğ’ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ (UI)             | Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ (Nginx)
8000    | FastAPI (Uvicorn)   | REST API, Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ğ¸Ğ´ĞµĞ¾      | Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ (Nginx)
80      | Nginx               | HTTP (Ñ€ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚ Ğ½Ğ° HTTPS)       | ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹
443     | Nginx               | HTTPS (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿)        | ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹
22      | SSH                 | Ğ£Ğ´Ğ°Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ÑĞµÑ€Ğ²ĞµÑ€Ñƒ     | ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸŸ¢ Ğ—ĞĞŸĞ£Ğ¡Ğš Ğ˜ ĞĞ¡Ğ¢ĞĞĞĞ’ĞšĞ Ğ¡Ğ•Ğ Ğ’Ğ˜Ğ¡ĞĞ’
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
sudo systemctl start media-cleaner-api
sudo systemctl start media-cleaner-web
sudo systemctl start nginx

# Ğ—Ğ°Ğ¿ÑƒÑĞº ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ°
sudo systemctl start media-cleaner-api          # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ API
sudo systemctl start media-cleaner-web          # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Web

# Ğ—Ğ°Ğ¿ÑƒÑĞº ÑÑ€Ğ°Ğ·Ñƒ Ğ²ÑĞµÑ… Ñ‚Ñ€Ñ‘Ñ…
sudo systemctl start media-cleaner-api media-cleaner-web nginx

# ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
sudo systemctl stop media-cleaner-api
sudo systemctl stop media-cleaner-web
sudo systemctl stop nginx

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²)
sudo systemctl restart media-cleaner-api        # ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ API
sudo systemctl restart media-cleaner-web        # ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Web
sudo systemctl restart nginx                    # ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Nginx
sudo systemctl reload nginx                     # Reload ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ° Ğ±ĞµĞ· Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸

# Ğ—Ğ°Ğ¿ÑƒÑĞº/Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° ÑÑ€Ğ°Ğ·Ñƒ Ğ²ÑĞµÑ…
sudo systemctl restart media-cleaner-api media-cleaner-web nginx
sudo systemctl stop media-cleaner-api media-cleaner-web nginx

# Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ°Ğ²Ñ‚Ğ¾Ğ·Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²Ğ¸ÑĞ° Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ
sudo systemctl enable media-cleaner-api
sudo systemctl enable media-cleaner-web
sudo systemctl enable nginx

# ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ°Ğ²Ñ‚Ğ¾Ğ·Ğ°Ğ¿ÑƒÑĞº
sudo systemctl disable media-cleaner-api


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ Ğ¡Ğ¢ĞĞ¢Ğ£Ğ¡Ğ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
sudo systemctl status media-cleaner-api
sudo systemctl status media-cleaner-web
sudo systemctl status nginx

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ÑÑ€Ğ°Ğ·Ñƒ (ĞºĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ´)
sudo systemctl status media-cleaner-api media-cleaner-web nginx | grep Active

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹ ÑĞ»ÑƒÑˆĞ°ÑÑ‚ Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ğ°Ñ…
sudo netstat -tupln | grep -E '5000|8000|80|443'
# Ğ˜Ğ»Ğ¸ Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ°:
sudo ss -tupln | grep -E '5000|8000|80|443'

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ
sudo lsof -i :5000      # ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ğ¿Ğ¾Ñ€Ñ‚ 5000
sudo lsof -i :8000      # ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ğ¿Ğ¾Ñ€Ñ‚ 8000

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ²
ps aux | grep -E 'uvicorn|gunicorn|nginx' | grep -v grep


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ ĞŸĞ ĞĞ¡ĞœĞĞ¢Ğ  Ğ›ĞĞ“ĞĞ’
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ğ ĞµĞ°Ğ»-Ñ‚Ğ°Ğ¹Ğ¼ Ğ»Ğ¾Ğ³Ğ¸ API Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ (ÑĞ°Ğ¼Ñ‹Ğµ ÑĞ²ĞµĞ¶Ğ¸Ğµ)
sudo journalctl -u media-cleaner-api -f

# Ğ ĞµĞ°Ğ»-Ñ‚Ğ°Ğ¹Ğ¼ Ğ»Ğ¾Ğ³Ğ¸ Web
sudo journalctl -u media-cleaner-web -f

# Ğ ĞµĞ°Ğ»-Ñ‚Ğ°Ğ¹Ğ¼ Ğ»Ğ¾Ğ³Ğ¸ Nginx
sudo tail -f /var/log/nginx/media-cleaner-error.log
sudo tail -f /var/log/nginx/media-cleaner-access.log

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 50 ÑÑ‚Ñ€Ğ¾Ğº Ğ»Ğ¾Ğ³Ğ¾Ğ² API
sudo journalctl -u media-cleaner-api -n 50

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ API Ğ·Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ñ‡Ğ°Ñ
sudo journalctl -u media-cleaner-api --since "1 hour ago"

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸
sudo journalctl -u media-cleaner-api -p err

# ĞšĞ¾Ğ¼Ğ±Ğ¾: logwatch Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
sudo journalctl -u media-cleaner-api PRIORITY=0..3 -f

# Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ Ğ² Ñ„Ğ°Ğ¹Ğ»
sudo journalctl -u media-cleaner-api -n 1000 > /tmp/api_logs.txt
sudo journalctl -u media-cleaner-web -n 1000 > /tmp/web_logs.txt


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” ĞĞ¢Ğ›ĞĞ”ĞšĞ Ğ˜ Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜ĞšĞ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Nginx ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹
sudo nginx -t

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ Ñ„Ğ°Ğ¹Ğ»Ğ°
sudo nginx -T

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Nginx ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³
sudo cat /etc/nginx/sites-enabled/media-cleaner

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚
sudo certbot certificates

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ĞµĞ½
openssl x509 -in /etc/letsencrypt/live/video-cleaner.example.com/fullchain.pem -noout -dates

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ API Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚
curl -I http://127.0.0.1:8000/docs

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Web Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚
curl -I http://127.0.0.1:5000/

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· HTTPS (ĞµÑĞ»Ğ¸ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½)
curl -I https://your-domain.com

# Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ Ñ„Ğ°Ğ¹Ğ»Ğ°
curl -X POST -F "file=@test.mp4" http://127.0.0.1:8000/upload

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
ps aux | grep -E 'uvicorn|gunicorn' | awk '{print $2, $3, $4, $6}'

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ´Ğ¸ÑĞºĞ¾Ğ²Ğ¾Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ¾
df -h

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ RAM
free -h

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ CPU Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
top -bn1 | head -20

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¿Ğ°Ğ¿ĞºĞ¸ Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°Ğ¼Ğ¸
du -sh /home/media_cleaner/uploads
du -sh /home/media_cleaner/logs


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ˜Ğ• Ğ˜ ĞŸĞ•Ğ Ğ•Ğ ĞĞ—Ğ’ĞĞ Ğ¢Ğ«Ğ’ĞĞĞ˜Ğ•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ´ Ğ¸Ğ· git
cd /home/media_cleaner
sudo -u media_cleaner git pull origin main

# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
sudo -u media_cleaner bash -c 'source venv/bin/activate && pip install -r requirements.txt'

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ½ĞµÑ‚ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ² Python
cd /home/media_cleaner
sudo -u media_cleaner bash -c 'source venv/bin/activate && python -m py_compile *.py'

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
sudo systemctl restart media-cleaner-api media-cleaner-web

# ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ĞºÑÑˆ Python
find /home/media_cleaner -type d -name __pycache__ -exec rm -rf {} +

# ĞŸĞµÑ€ĞµÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ (ĞµÑĞ»Ğ¸ ÑĞµÑ€ÑŒÑ‘Ğ·Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹)
cd /home/media_cleaner
sudo -u media_cleaner rm -rf venv
sudo -u media_cleaner python3.11 -m venv venv
sudo -u media_cleaner bash -c 'source venv/bin/activate && pip install -r requirements.txt'


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§¹ ĞĞ§Ğ˜Ğ¡Ğ¢ĞšĞ Ğ˜ ĞĞ‘Ğ¡Ğ›Ğ£Ğ–Ğ˜Ğ’ĞĞĞ˜Ğ•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ uploaded Ğ²Ğ¸Ğ´ĞµĞ¾ (ÑÑ‚Ğ°Ñ€ÑˆĞµ 7 Ğ´Ğ½ĞµĞ¹)
find /home/media_cleaner/uploads -type f -mtime +7

# Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾
find /home/media_cleaner/uploads -type f -mtime +7 -delete

# ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹
rm -rf /home/media_cleaner/temp/*

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ»Ğ¾Ğ³Ğ¾Ğ²
du -sh /home/media_cleaner/logs/

# Ğ¡Ğ¶Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸
cd /home/media_cleaner/logs
tar -czf archive_$(date +%Y%m%d).tar.gz *.log
rm *.log

# ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸ journalctl (Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 7 Ğ´Ğ½ĞµĞ¹)
sudo journalctl --vacuum=time=7d

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½ÑƒÑ ĞºĞ¾Ğ¿Ğ¸Ñ
cd /home/media_cleaner
tar -czf backup_$(date +%Y%m%d_%H%M%S).tar.gz config.json logs/ uploads/
mv backup_*.tar.gz backups/

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¿Ğ¸Ğ¸
ls -lhS /home/media_cleaner/backups/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞĞ¡Ğ¢Ğ¬ Ğ˜ ĞĞ”ĞœĞ˜ĞĞ˜Ğ¡Ğ¢Ğ Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ñ€Ğ²Ğ¾Ğ»
sudo ufw status

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ Ñ„Ğ°Ğ¹Ñ€Ğ²Ğ¾Ğ»Ğ°
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ Ñ„Ğ°Ğ¹Ñ€Ğ²Ğ¾Ğ»Ğ°
sudo ufw delete allow 8000/tcp

# Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ
cat /etc/passwd | grep bash

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ñ„Ğ°Ğ¹Ğ»Ğ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ°
ls -lh /home/media_cleaner/config.json

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğ½Ğ° Ñ„Ğ°Ğ¹Ğ»Ñ‹
ls -la /home/media_cleaner/ | head -20

# Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ½Ğ° Ñ„Ğ°Ğ¹Ğ»Ñ‹
sudo chown -R media_cleaner:media_cleaner /home/media_cleaner
sudo chmod 755 /home/media_cleaner/{uploads,temp,logs}

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ´Ğ¾Ğ¼Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
du -sh /home/media_cleaner

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ²Ñ…Ğ¾Ğ´Ñ‹ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€
lastlog

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğµ SSH ÑĞµÑÑĞ¸Ğ¸
who
w


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ• ĞŸĞ ĞĞ‘Ğ›Ğ•Ğœ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: nginx: [error] open() "/var/run/nginx.pid" failed
sudo mkdir -p /var/run
sudo nginx -s reload

# ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Port 8000 already in use
sudo lsof -i :8000
sudo kill -9 <PID>

# ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Permission denied Ğ´Ğ»Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¾Ğº
sudo chown -R media_cleaner:media_cleaner /home/media_cleaner/uploads
sudo chmod 755 /home/media_cleaner/uploads

# ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: API Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ 502 Bad Gateway
sudo systemctl status media-cleaner-api
sudo journalctl -u media-cleaner-api -n 50

# ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ’Ñ‹ÑĞ¾ĞºĞ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ÑÑÑ‰Ğ¸Ğ¹ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ²ÑĞµĞ³Ğ¾
ps aux --sort=-%mem | head -10

# ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: FFmpeg Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½
which ffmpeg
/usr/bin/ffmpeg -version

# ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚ Ğ¸ÑÑ‚ĞµĞºĞ°ĞµÑ‚
sudo certbot renew --dry-run

# ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Cannot connect to database
# Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ Ñ‡Ñ‚Ğ¾ config.json Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹:
cat /home/media_cleaner/config.json

# ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Nginx Ğ·Ğ°Ğ²Ğ¸ÑĞ°ĞµÑ‚ Ğ½Ğ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ°
# Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ timeout:
sudo nano /etc/nginx/sites-available/media-cleaner
# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ: proxy_read_timeout 600s;
# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ: sudo systemctl reload nginx


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ˆ ĞœĞĞĞ˜Ğ¢ĞĞ Ğ˜ĞĞ“ ĞŸĞ ĞĞ˜Ğ—Ğ’ĞĞ”Ğ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞĞ¡Ğ¢Ğ˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Real-time Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€ (ĞºĞ°Ğº Task Manager)
htop

# ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€ ÑĞµĞ·Ğ´Ñ‹
nethogs

# ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€ Ğ´Ğ¸ÑĞºĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
iotop

# Ğ¡Ğ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ CPU Ğ·Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ñ‡Ğ°Ñ
sar -u 1 3600

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¸ÑĞºĞ° Ğ¿Ğ¾ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸ÑĞ¼
du -sh /home/media_cleaner/* | sort -h

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ ĞºĞ°ĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ²ÑĞµĞ³Ğ¾ CPU
ps aux --sort=-%cpu | head -10

# ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°
pmap -x $(pgrep -f uvicorn)

# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Prometheus node exporter
sudo apt install -y prometheus-node-exporter
sudo systemctl start prometheus-node-exporter
sudo systemctl enable prometheus-node-exporter

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
curl http://127.0.0.1:9100/metrics | head -50


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ Ğ‘Ğ«Ğ¡Ğ¢Ğ Ğ«Ğ• ĞšĞĞœĞĞĞ”Ğ« (ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹-Ğ²ÑÑ‚Ğ°Ğ²Ğ»ÑĞ¹)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ (Ğ²ÑĞµ ÑÑ€Ğ°Ğ·Ñƒ)
echo "=== Ğ¡Ğ¢ĞĞ¢Ğ£Ğ¡ Ğ¡Ğ•Ğ Ğ’Ğ˜Ğ¡ĞĞ’ ===" && \
sudo systemctl is-active media-cleaner-api media-cleaner-web nginx && \
echo "" && \
echo "=== ĞĞ¢ĞšĞ Ğ«Ğ¢Ğ«Ğ• ĞŸĞĞ Ğ¢Ğ« ===" && \
sudo ss -tupln | grep -E '5000|8000|80|443' && \
echo "" && \
echo "=== ĞŸĞĞœĞ¯Ğ¢Ğ¬ ===" && \
free -h && \
echo "" && \
echo "=== Ğ”Ğ˜Ğ¡Ğš ===" && \
df -h / && \
echo "" && \
echo "=== TOP ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡Ğ« ===" && \
ps aux --sort=-%mem | head -6

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ
sudo systemctl restart media-cleaner-api media-cleaner-web nginx && \
sleep 2 && \
echo "Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:" && \
sudo systemctl status media-cleaner-api media-cleaner-web nginx --no-pager

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ²ÑĞµ Ğ»Ğ¾Ğ³Ğ¸ Ğ·Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ñ‡Ğ°Ñ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾
(echo "=== API LOGS ===" && sudo journalctl -u media-cleaner-api --since "1 hour ago" -n 20) && \
(echo "" && echo "=== WEB LOGS ===" && sudo journalctl -u media-cleaner-web --since "1 hour ago" -n 20) && \
(echo "" && echo "=== NGINX ERRORS ===" && sudo tail -20 /var/log/nginx/media-cleaner-error.log)

# ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¾Ğ±ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ
sudo systemctl stop media-cleaner-api media-cleaner-web && \
echo "ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾ Ğ´Ğ»Ñ Ğ¾Ğ±ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ" && \
echo "Ğ”Ğ»Ñ Ğ²Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ: sudo systemctl start media-cleaner-api media-cleaner-web"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
